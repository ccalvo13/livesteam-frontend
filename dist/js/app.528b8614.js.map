{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/App.vue?2614","webpack:///./src/App.vue?315a","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/App.vue?0347"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","attrs","staticStyle","_c","ref","_vm","joinedRoom","staticClass","on","render","staticRenderFns","el","roomId","hasJoined","videoOn","micOn","mediaRecorder","chunks","userStream","socket","audioContext","videoContainer","stream","this","setTimeout","startListening","hash","location","substring","toggleRoom","methods","blob","Blob","file","File","console","log","formdata","FormData","append","axios","post","e","start","$refs","webrtc","videoList","video","getVideoTracks","enabled","audio","getAudioTracks","stopListening","mediaStreamSource","disconnect","analyser","isListening","document","querySelector","style","border","navigator","mediaDevices","getUserMedia","then","createMediaStreamSource","createAnalyser","fftSize","connect","checkTalking","catch","error","bufferLength","frequencyBinCount","dataArray","Uint8Array","check","getByteFrequencyData","volume","reduce","acc","val","threshold","requestAnimationFrame","leave","stop","join","emit","sessionId","MediaRecorder","ondataavailable","pushData","onstop","onStop","alert","shareScreen","streams","forEach","addTrack","streamId","baseUrl","origin","clipboard","writeText","shareData","title","text","url","share","err","copyClipboard","component","Vue","use","Vuetify","myCustomLightTheme","dark","colors","background","surface","primary","secondary","info","success","warning","theme","defaultTheme","themes","defaults","VBtn","color","variant","rounded","icons","iconfont","require","Ads","Adsense","WebRTC","config","productionTip","vuetify","h","App","$mount"],"mappings":"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","file":"js/app.528b8614.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Adsense',{staticStyle:{\"height\":\"0\"},attrs:{\"data-ad-client\":\"ca-pub-7023023584987784\",\"data-ad-slot\":\"5070366491\"}}),_c('div',[_c('div',[_c('form',[_c('vue-webrtc',{ref:\"webrtc\",staticClass:\"w-full video-webrtc\",attrs:{\"id\":\"call-canvas\",\"roomId\":_vm.roomId,\"width\":\"100%\"},on:{\"share-started\":_vm.shareStarted,\"share-stopped\":_vm.leftRoom,\"left-room\":_vm.leftRoom,\"joined-room\":_vm.joinedRoom}}),(_vm.hasJoined)?_c('div',{staticClass:\"video-webrtc-controls\"},[_c('v-btn',{staticClass:\"mx-2 bg-primary\",attrs:{\"size\":\"x-large\"},on:{\"click\":_vm.onHandleVideoOn}},[_c('v-icon',[_vm._v(_vm._s(_vm.videoOn ? 'mdi-video-outline': 'mdi-video-off-outline')+\" \")])],1),_c('v-btn',{staticClass:\"mx-2 bg-primary\",attrs:{\"size\":\"x-large\"},on:{\"click\":_vm.onHandleMicOn}},[_c('v-icon',[_vm._v(_vm._s(_vm.micOn ? 'mdi-microphone': 'mdi-microphone-off')+\" \")])],1),_c('v-btn',{staticClass:\"mx-2 bg-red\",attrs:{\"size\":\"x-large\"},on:{\"click\":_vm.toggleRoom}},[_c('v-icon',[_vm._v(\"mdi-phone-hangup\")])],1)],1):_vm._e()],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n   \n    <Adsense\n      data-ad-client=\"ca-pub-7023023584987784\"\n      data-ad-slot=\"5070366491\" style=\"height: 0;\">\n    </Adsense>\n     <div>\n        <div>\n          <form>\n            <!-- <div class=\"mb-4\">\n              <label class=\"block text-gray-700 text-sm font-bold mb-2\" for=\"room-input\">\n                Room ID\n              </label>\n              <input v-model=\"roomId\" placeholder=\"Enter room ID\" id=\"room-input\" class=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"/>\n            </div> -->\n        \n          <vue-webrtc id=\"call-canvas\" :roomId=\"roomId\" ref=\"webrtc\" v-on:share-started=\"shareStarted\"  class=\"w-full video-webrtc\" v-on:share-stopped=\"leftRoom\" v-on:left-room=\"leftRoom\" v-on:joined-room=\"joinedRoom\" width=\"100%\"/>\n          <div class=\"video-webrtc-controls\" v-if=\"hasJoined\">\n            <!-- <button type=\"button\" @click=\"copyClipboard\" class=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\">Share Meeting</button> -->\n            \n            <v-btn @click=\"onHandleVideoOn\" class=\"mx-2 bg-primary\" size=\"x-large\"><v-icon>{{videoOn ?  'mdi-video-outline': 'mdi-video-off-outline' }} </v-icon></v-btn>\n            <v-btn @click=\"onHandleMicOn\" class=\"mx-2 bg-primary\" size=\"x-large\"><v-icon>{{micOn ?  'mdi-microphone': 'mdi-microphone-off' }} </v-icon></v-btn>\n            <!-- <v-btn @click=\"screenShare\" class=\"mx-2\" size=\"x-large\">Screen Share</v-btn> -->\n            <v-btn @click=\"toggleRoom\" class=\"mx-2 bg-red\" size=\"x-large\" ><v-icon>mdi-phone-hangup</v-icon></v-btn>\n          </div>\n        </form>\n      </div>\n    </div>\n\n\n  </div>\n\n</template>\n\n<script lang=\"ts\">\nimport axios from 'axios';\nimport { io } from 'socket.io-client';\nimport { ref } from 'vue';\nexport default {\n  name: 'App',\n  data () {\n    return {\n      el: ref(null),\n      roomId: 'roomId',\n      hasJoined: false,\n      videoOn: true,\n      micOn: true,\n      mediaRecorder: {},\n      chunks: [],\n      userStream: {},\n      socket: io('https://livestream-backend-ng53ixt7xq-as.a.run.app'),\n      audioContext: null,\n      videoContainer: null,\n      stream: null,\n    }\n  },\n  mounted () {\n    this.audioContext = new (window.AudioContext)();\n   \n    setTimeout( this.startListening(), 1000)\n    const hash =  window.location.hash\n    if(hash != '') {\n      this.roomId = hash.substring(1)\n      this.toggleRoom()\n    }\n  },\n  methods: {\n    async onStop () {\n      var blob = new Blob(this.chunks, { 'type' : 'video/webm' }); // other types are available such as 'video/webm' for instance, see the doc for more info\n      this.chunks = [];\n      const file = new File ([blob], `${this.roomId}.webm`, { 'type' : 'video/webm' })\n        // var a = document.createElement(\"a\"),\n        //           url = URL.createObjectURL(file);\n        // a.href = url;\n        // a.download = `${this.roomId}.webm`;\n        // document.body.appendChild(a);\n        // a.click()\n        console.log('data 1: ', file);\n        let formdata = new FormData();\n        formdata.append('fileName', `${this.roomId}`)\n        formdata.append('file', file)\n\n        const { data } = await axios.post( 'https://livestream-backend-ng53ixt7xq-as.a.run.app/files', formdata);\n        console.log('data: ', data, formdata);\n\n    },\n    pushData (e) {\n      this.chunks.push(e.data);\n    },\n    record () {\n      this.mediaRecorder.start()\n    },\n    onHandleVideoOn () {\n      this.videoOn = !this.videoOn;\n      this.userStream = this.$refs.webrtc.videoList[0].stream\n      this.userStream.video = this.videoOn\n      this.userStream.getVideoTracks()[0].enabled = this.videoOn;\n       \n\n    },\n    onHandleMicOn () {\n      this.micOn = !this.micOn;\n      console.log('this.micOn: ', this.micOn);\n      this.userStream = this.$refs.webrtc.videoList[0].stream\n      this.userStream.audio = this.micOn\n      this.userStream.getAudioTracks()[0].enabled = this.micOn;\n      if(this.micOn){\n        this.startListening();\n      } else {\n        this.stopListening();\n      }\n    },\n    stopListening() {\n      if (this.mediaStreamSource) {\n          this.mediaStreamSource.disconnect();\n          this.mediaStreamSource = null;\n          this.analyser = null;\n          this.isListening = false;\n      }\n      setTimeout(function(){\n          this.videoContainer  = document.querySelector('.video-item video');\n          this.videoContainer.style.border =  'none';\n      }, 1000)\n    },\n    startListening() {\n      // const streaming = this.$refs.webrtc.videoList[0].stream;\n      // console.log('stream ing: ', streaming);\n      navigator.mediaDevices.getUserMedia({ audio: true })\n        .then((stream) => {\n          // this.stream = stream;\n          // console.log('stream: ', this.stream, streaming);\n\n          this.mediaStreamSource = this.audioContext.createMediaStreamSource(stream);\n          this.analyser = this.audioContext.createAnalyser();\n          this.analyser.fftSize = 32;\n          this.mediaStreamSource.connect(this.analyser);\n          this.isListening = true;\n          this.checkTalking();\n        })\n        .catch((error) => {\n          console.error('Error accessing microphone:', error);\n        });\n    },\n    checkTalking() {\n      const bufferLength = this.analyser.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n\n      const check = () => {\n        if (!this.isListening) {\n          return;\n        }\n\n        this.analyser.getByteFrequencyData(dataArray);\n\n        // Calculate the average volume\n        const volume = dataArray.reduce((acc, val) => acc + val, 0) / bufferLength;\n\n        // Adjust the threshold as per your requirement\n        const threshold = 100;\n        setTimeout(function(){\n           console.log('stream ---: ', this.stream);\n          this.videoContainer  = document.querySelector('.video-item video');\n          \n           if (volume > threshold && this.videoContainer) {\n            \n              this.videoContainer.style.border =  'thick solid #FF6B35';\n              console.log('User is talking', this.analyser);\n            } else {\n              if(this.videoContainer){\n                this.videoContainer.style.border =  'none';\n              }\n              console.log('User is not talking', this.analyser);\n            }\n        }, 1000)\n       \n\n        requestAnimationFrame(check);\n      };\n\n      check();\n    },\n    async toggleRoom () {\n      try {\n        if(this.hasJoined) {\n          this.$refs.webrtc.leave()\n          this.hasJoined = false\n          this.stopListening();\n          this.mediaRecorder.stop()\n        } else {\n          await this.$refs.webrtc.join()\n          this.socket.emit('join', { sessionId: this.roomId });\n          this.userStream = this.$refs.webrtc.videoList[0].stream\n          this.mediaRecorder = new MediaRecorder(this.userStream)\n          this.mediaRecorder.start()\n          this.mediaRecorder.ondataavailable = e => this.pushData(e)\n          this.mediaRecorder.onstop = () => this.onStop()\n          this.hasJoined = true\n        }\n      } catch (e) {\n        alert(e)\n      }\n\n    },\n    screenShare () {\n      try {\n        this.$refs.webrtc.shareScreen()\n      } catch (e) {\n        alert('Screen share not available')\n      }\n    },\n    async addTrack() {\n      try {\n        const streams = this.$refs.webrtc.videoList\n        streams.forEach(stream => {\n          this.userStream.addTrack(stream)\n        })\n      } catch (e) {\n          alert(e)\n      }\n    },\n    joinedRoom (streamId) {\n      // this.addTrack(streamId)\n      console.log(streamId)\n    },\n    shareStarted (streamId) {\n      console.log(streamId)\n      // this.addTrack(streamId)\n    },\n    leftRoom (streamId) {\n      // this.mediaRecorder.removeTrack(streamId)\n      console.log(streamId)\n    },\n    async copyClipboard () {\n      const baseUrl = window.location.origin\n      await navigator.clipboard.writeText(`${baseUrl}/#${this.roomId}`)\n      alert('Link copied to clipboard!')\n    },\n    async share () {\n      const baseUrl = window.location.origin\n    const shareData = {\n        title: 'Vere-ai',\n        text: 'Join my meeting!',\n        url: `${baseUrl}/#${this.roomId}`\n      }\n      try {\n      await navigator.share(shareData)\n      } catch(err) {\n      this.copyClipboard()\n      }\n    }\n  }\n}\n</script>\n\n<style>\n#room-input {\n  margin-bottom: 3px;\n}\n#call-canvas {\n  background-color: transparent;\n}\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n}\n\n.v-btn>.v-btn__content .v-icon {\n    font-size: 35px;\n}\n#join-btn {\n  margin: 4px 2px;\n}\n.v-btn:not(.v-btn--round).v-size--default {\n    height: 60px !important;\n}\n.video-webrtc-controls {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 60px;\n    margin: auto;\n}\n::-webkit-media-controls {\n    display: none;\n}\n.video-item:nth-child(2), .video-item:nth-child(2)> video {\n    position: absolute;\n    border-radius: 20px;\n}\n.video-item:nth-child(2) {\n    width: 40% !important;\n    height: 30% !important;\n    max-width: 500px;\n    max-height: 340px;\n    top: 15px;\n    right: 47px;\n}\n.video-item:nth-child(2)> video {\n    width: 100% !important;\n    height: 100% !important;\n}\n\n.video-webrtc .video-item, .video-webrtc .video-item video {\n  width: 100vw;\n  height: 100vh;\n  background-size: cover;\n  object-fit: cover;\n}\n.bg-red {\n  background-color: #E74C3C !important;\n  color: #fff !important;\n}\n.bg-primary {\n  background-color: #1A1A1A !important;\n  color: #fff !important;\n}\nimg {\n  height: 80px;\n  width: 100%;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=76ebbd83&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=76ebbd83&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib/framework';\nimport '@mdi/font/css/materialdesignicons.css'\n\nVue.use(Vuetify);\nconst myCustomLightTheme = {\n    dark: false,\n    colors: {\n      background: '#FFFFFF',\n      surface: '#FFFFFF',\n      primary: '#3F372E',\n      'primary-darken-1': '#141414',\n      secondary: '#03DAC6',\n      'secondary-darken-1': '#018786',\n      error: '#B00020',\n      info: '#2196F3',\n      success: '#4CAF50',\n      warning: '#FB8C00',\n    },\n  }\nexport default new Vuetify({\n    theme: {\n        defaultTheme: 'myCustomLightTheme',\n        themes: {\n            myCustomLightTheme,\n        },\n    },\n    defaults: {\n        VBtn: {\n          color: 'primary',\n          variant: 'outlined',\n          rounded: true,\n        },\n      },\n    icons: {\n        iconfont: 'mdi',\n    },\n});\n","import Vue from 'vue'\nimport App from './App.vue'\nimport WebRTC from 'vue-webrtc'\nimport Ads from 'vue-google-adsense'\nimport './index.css'\nimport vuetify from './plugins/vuetify'\nimport Vuetify from 'vuetify'\nimport 'vuetify/dist/vuetify.min.css'\nimport \"@mdi/font/css/materialdesignicons.css\";\nVue.use(require('vue-script2'))\n\nVue.use(Vuetify)\nVue.use(Ads.Adsense)\nVue.use(WebRTC)\nVue.config.productionTip = false\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=76ebbd83&prod&lang=css&\""],"sourceRoot":""}