(function(e){function t(t){for(var r,s,n=t[0],d=t[1],c=t[2],u=0,h=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(e[r]=d[r]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],r=!0,n=1;n<o.length;n++){var d=o[n];0!==a[d]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=o[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=r,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],d=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var l=d;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);var r=o("2b0e"),a=o("8336"),i=o("132d"),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Adsense",{staticStyle:{height:"0"},attrs:{"data-ad-client":"ca-pub-7023023584987784","data-ad-slot":"5070366491"}}),t("div",[t("div",[t("form",[t("vue-webrtc",{ref:"webrtc",staticClass:"w-full video-webrtc",attrs:{id:"call-canvas",roomId:e.roomId,width:"100%"},on:{"share-started":e.shareStarted,"share-stopped":e.leftRoom,"left-room":e.leftRoom,"joined-room":e.joinedRoom}}),e.hasJoined?t("div",{staticClass:"video-webrtc-controls"},[t(a["a"],{staticClass:"mx-2 bg-primary",attrs:{size:"x-large"},on:{click:e.onHandleVideoOn}},[t(i["a"],[e._v(e._s(e.videoOn?"mdi-video-outline":"mdi-video-off-outline")+" ")])],1),t(a["a"],{staticClass:"mx-2 bg-primary",attrs:{size:"x-large"},on:{click:e.onHandleMicOn}},[t(i["a"],[e._v(e._s(e.micOn?"mdi-microphone":"mdi-microphone-off")+" ")])],1),t(a["a"],{staticClass:"mx-2 bg-red",attrs:{size:"x-large"},on:{click:e.toggleRoom}},[t(i["a"],[e._v("mdi-phone-hangup")])],1)],1):e._e()],1)])])],1)},n=[],d=o("cee4"),c={name:"App",data(){return{roomId:"roomId",hasJoined:!1,videoOn:!0,micOn:!0,mediaRecorder:{},chunks:[],userStream:{}}},mounted(){const e=window.location.hash;""!=e&&(this.roomId=e.substring(1),this.toggleRoom())},methods:{async onStop(){var e=new Blob(this.chunks,{type:"video/webm"});this.chunks=[];const t=new File([e],this.roomId+".webm",{type:"video/webm"});console.log("data 1: ",t);let o=new FormData;o.append("fileName",""+this.roomId),o.append("file",t);const{data:r}=await d["a"].post("http://localhost:3000/files",o);console.log("data: ",r,o)},pushData(e){this.chunks.push(e.data)},record(){this.mediaRecorder.start()},onHandleVideoOn(){this.videoOn=!this.videoOn,this.userStream=this.$refs.webrtc.videoList[0].stream,this.userStream.video=this.videoOn,this.userStream.getVideoTracks()[0].enabled=this.videoOn,console.log("this.userStream: ",this.userStream)},onHandleMicOn(){this.micOn=!this.micOn,this.userStream=this.$refs.webrtc.videoList[0].stream,this.userStream.audio=this.micOn,this.userStream.getAudioTracks()[0].enabled=this.micOn,console.log("this.userStream: ",this.userStream)},async toggleRoom(){try{this.hasJoined?(this.$refs.webrtc.leave(),this.hasJoined=!1,this.mediaRecorder.stop()):(await this.$refs.webrtc.join(),this.userStream=this.$refs.webrtc.videoList[0].stream,this.mediaRecorder=new MediaRecorder(this.userStream),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=e=>this.pushData(e),this.mediaRecorder.onstop=()=>this.onStop(),this.hasJoined=!0)}catch(e){alert(e)}},screenShare(){try{this.$refs.webrtc.shareScreen()}catch(e){alert("Screen share not available")}},async addTrack(){try{const e=this.$refs.webrtc.videoList;e.forEach(e=>{this.userStream.addTrack(e)})}catch(e){alert(e)}},joinedRoom(e){console.log(e)},shareStarted(e){console.log(e)},leftRoom(e){console.log(e)},async copyClipboard(){const e=window.location.origin;await navigator.clipboard.writeText(`${e}/#${this.roomId}`),alert("Link copied to clipboard!")},async share(){const e=window.location.origin,t={title:"Vere-ai",text:"Join my meeting!",url:`${e}/#${this.roomId}`};try{await navigator.share(t)}catch(o){this.copyClipboard()}}}},l=c,u=(o("9a66"),o("2877")),h=Object(u["a"])(l,s,n,!1,null,null,null),m=h.exports,p=o("6293"),f=o.n(p),v=o("119b"),b=(o("a766"),o("f309"));o("5363");r["default"].use(b["a"]);const g={dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF",primary:"#3F372E","primary-darken-1":"#141414",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}};var w=new b["a"]({theme:{defaultTheme:"myCustomLightTheme",themes:{myCustomLightTheme:g}},defaults:{VBtn:{color:"primary",variant:"outlined",rounded:!0}},icons:{iconfont:"mdi"}}),y=o("ce5b"),O=o.n(y);o("bf40");r["default"].use(o("395c")),r["default"].use(O.a),r["default"].use(v["a"].Adsense),r["default"].use(f.a),r["default"].config.productionTip=!1,new r["default"]({vuetify:w,render:e=>e(m)}).$mount("#app")},"60dd":function(e,t,o){},"9a66":function(e,t,o){"use strict";o("60dd")},a766:function(e,t,o){}});
//# sourceMappingURL=app.a04daf32.js.map